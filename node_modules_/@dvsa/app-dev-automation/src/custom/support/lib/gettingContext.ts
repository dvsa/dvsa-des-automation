import { AppiumContext } from '../../../models/appiumContext.model';

class GettingContext {
  async switchToDVSAAppContext() {
    const contexts = await driver.getContexts() as unknown as AppiumContext[];

    const contextToSwitchTo = (contexts.find((context) => context.title?.indexOf('DVSA') >= 0) || null);

    if (contextToSwitchTo) {
      driver.switchContext(contextToSwitchTo.id);
    } else {
      throw new Error('unable to switch app context');
    }
  }
}

export default GettingContext;
