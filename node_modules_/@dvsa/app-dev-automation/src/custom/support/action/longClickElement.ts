import { getElementByReference } from '../../../helpers/element-reference-helper';
import GettingContext from '../lib/gettingContext';

/**
 * Perform an click action on the given element
 * @param  {String}   selector  Text to select by
 * @param  {number}   time      Time to wait for (in ms)

 */
export default async (
  selector: string,
  time: number,
) => {
  const elementSelectorForLocation: string = getElementByReference(selector);
  const { x, y } = await (await $(elementSelectorForLocation)).getLocation();
  await driver.switchContext('NATIVE_APP');
  driver.touchPerform([
    {
      action: 'press',
      options: {
        x,
        y,
      },
    },
    {
      action: 'wait',
      options: {
        ms: time,
      },
    },
    {
      action: 'release',
      options: {},
    },
  ]);
  await new GettingContext().switchToDVSAAppContext();
};
