import { Selector } from 'webdriverio';
import { getElementByReference } from '../../../../helpers/element-reference-helper';

/**
 * Check if the given elements contains text
 * @param  {String}   selector Element selector
 * @param  {String}   expectedText  The text to check against
 */
export default async (
  selector: string,
  expectedText: string,
) => {
  /**
     * The expected text
     * @type {String}
     */
  const stringExpectedText = expectedText;
  const elementSelector: Selector = getElementByReference(selector);

  /**
     * The element from the page
     * @type {Element}
     */
  const elem = await $(elementSelector);

  await elem.waitForDisplayed();

  /**
     * The text of the element
     * @type {String}
     */
  const text = await elem.getText();
  console.log(text);

  // Clear any new lines found in the results to flatten the string
  expect((await text).replace(/\n/, ' ')).toContain(stringExpectedText);
};
