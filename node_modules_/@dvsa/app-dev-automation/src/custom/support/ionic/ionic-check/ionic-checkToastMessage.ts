import type { Selector } from 'webdriverio';

/**
 * Check if the given elements contains text
 * @param  {String}   expectedText  The text to check against
 */
export default async (
  expectedText: string,
) => {
  /**
     * The expected text
     * @type {String}
     */
  const stringExpectedText = expectedText;
  const elementSelector: Selector = 'ion-toast';

  /**
     * The element from the page
     * @type {Element}
     */
  // const elem = $(elementSelector).shadow$('.toast-message');
  const elem = await $(elementSelector).$('>>>.toast-message');

  await elem.waitForDisplayed();

  /**
     * The text of the element
     * @type {String}
     */
  const text = await elem.getText();

  // Clear any new lines found in the results to flatten the string
  expect(text.replace(/\n/, ' ')).toContain(stringExpectedText);
  await browser.pause(200);
};
