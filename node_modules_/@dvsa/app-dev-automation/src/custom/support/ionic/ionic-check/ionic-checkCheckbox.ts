import checkIfElementExists from '../../../../boilerplate/support/lib/checkIfElementExists';

/**
 * Perform an click action on the given element
 * @param  {String}   parent  The parent item that contains the toggle
 * @param  {String}   type    Type of the element (ion-button or button)
 * @param  {String}   text    Text to select by
 */
export default async (
  text: string,
  selected: string,
) => {
  /**
     * Grab the selector for the parent object that was passed in
     * @type {string}
     */

  /**
     * Construct the element selector for the ion-checkbox with the name thats passed in
     */

  const elementSelector = `//*[normalize-space(text())='${text}']//parent::ion-item//ion-checkbox`;

  await checkIfElementExists(elementSelector);

  await $(elementSelector).waitForClickable();

  const currentSetting = await $(elementSelector).getAttribute('aria-checked') === 'true';

  if (selected === 'be') {
    expect(currentSetting).toBe(true);
  } else {
    expect(currentSetting).not.toBe(true);
  }
};
