import { format, parseISO } from 'date-fns';

class PageObjectsHelper {
  isoTimeto12Hour(theTime: string): string {
    const time = theTime.slice(0, -1);
    return format(parseISO(time), 'h:mma');
  }

  rgb2hex(rgbstring: string) {
    const rgb = rgbstring.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
    return (rgb && rgb.length === 4) ? `#${
      (`0${parseInt(rgbstring[1], 10).toString(16)}`).slice(-2)
    }${(`0${parseInt(rgbstring[2], 10).toString(16)}`).slice(-2)
    }${(`0${parseInt(rgbstring[3], 10).toString(16)}`).slice(-2)}` : '';
  }

  async findContextWithIdStartingWith(id: string) {
    const regex = new RegExp(id, 'ig');
    const contexts = driver.getContexts();
    // eslint-disable-next-line max-len
    return (await contexts).find((context:any) => context.id !== undefined && context.id.match(regex));
  }
}

export default new PageObjectsHelper();
